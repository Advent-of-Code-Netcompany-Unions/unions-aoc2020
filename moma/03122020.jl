

# input="..##.......\n#...#...#..\n.#....#..#.\n..#.#...#.#\n.#...##..#.\n..#.##.....\n.#.#.#....#\n.#........#\n#.##...#...\n#...##....#\n.#..#...#.#"
input="....#...#####..##.#..##..#....#\n..##.#.#.........#.#......##...\n#.#.#.##.##...#.......#...#..#.\n..##.............#.#.##.....#..\n##......#.............#....#...\n.....##..#.....##.#.......##..#\n.##.....#........##...##.#....#\n.##......#.#......#.....#..##.#\n##....#..#...#...#...##.#...##.\n##........##.#...##......#.#.#.\n..#.#........#...##.....#.....#\n..#.......####.#....#..#####...\n.##..#..#..##.#.....###.#..#...\n......###..##.....#.#.#..###.#.\n..#.#...#..##.....#....#.#.....\n.....#.#...#.###.#..#..........\n##.....#...#.#....#..#.#.......\n..#...#...#.........##......#..\n......#.#...#...#..#...##.#...#\n....#.................##.##....\n...#......#.............#....##\n##..#..#..........#...##.#.#...\n....#...##....#..#.#...........\n##.#.#.#...#....#........#..#.#\n...###..........#...#...#..##.#\n..##.......###.#......##.##....\n...........#.#....#.....#.#...#\n..#......##.#...##.#.#......#.#\n..........#.#....#.#..#....#...\n##..##...##.......#.#....#.#.##\n.##..#.#..#...........#.#...#.#\n#......##......#....####.#....#\n..###......##...#...#.#.......#\n.#.##.##....##..#..##...#......\n.#....#..#........#..#.##.#.#..\n..#.........#.#.###....###.#...\n..#..#.#.#..#..#.##.##...####..\n#..#..#......#..#.#....#.#.#.##\n..#.........#...#..#.#.#..#...#\n#..#......###.....##....##.....\n#..#.....#.#.#.##.....##...#.#.\n##..#.#...#.........#.#........\n#....#.......#.....#..#..#.#...\n...###.##.###.###.#####..#...#.\n.....#..#.#..##...............#\n..#.....###.###.#.....#.#....##\n###.#.........#..#.#.#..#.#..#.\n.##.........#..#..##....#.#...#\n.#...#........#...#.....#....#.\n####..........###....#.#.#....#\n....##..###....#....#.#...#....\n..............##......##..#.###\n.#...........###.#.#....#......\n###.#..#..#...#.........##.....\n..#.....##...#.#.....##...#.##.\n.###.#........#..#.#...#.#..##.\n.......##....##.........##.#..#\n#....#...#...##...#.#..#..#..##\n...#...##..#...#...#.#....#.#.#\n#.#......#.#...##......#.#...##\n.#.###..#.###.#.....#.##.##.#.#\n#...#............#...#.##..##..\n....#..###.......#.....##....#.\n.#####..#.....#.....#...#.....#\n..##..#..###.......##.#........\n.#...##.##.....#.##...##...#..#\n......###...#....#....#........\n....#...#.#....#...#.#.#......#\n....#..##...##.#..#....###.....\n...#...#..#.#...#....#.#..#####\n####....#.....#.........#.#....\n...###.#.#..#.#..##............\n.##..#####..#...#..#..#.......#\n.###......#.#.#..#....#.....#..\n#....##.##..#.#...............#\n...#.#..#........#......#....#.\n#.....#....###....#..#.#.#.....\n.#..#....#...#.#.....##....#...\n..#.##.#.##.#..#.##.#.....#.#..\n.......#.......###..###..#...#.\n.#.......#..#........#.#.......\n.#.#...#.....#.##..##.....#....\n#.......##....#......#.....##..\n.#.....#...##...#..##.....#....\n....#..#.#.......#.#.#.........\n..#....#....##.##..#..##.##.#..\n.#...#....##...#........#....#.\n#.#......#...#....#...........#\n.#....#..#..###.#.....#..#.....\n..#..................#.....#...\n..#...###..#..####.#..#.#.#.#..\n...#........##...##..##..#....#\n...#.....#........##..#.....#.#\n#....#.....##.##......#...##...\n...#####....#..##..##...#.#....\n###.........#.#..#..#..##.#...#\n##...#..##...#.##.#........#...\n.#....#.#...#..#...#..#.#......\n.#......##.#...#...#..#....#...\n#..#.#.#......##.##.####..#....\n.#...#.#.##...##.#...#...#.....\n####.#.........#...##..##....##\n.....###........###.##...#.#...\n.##.....#.....#....##.....##...\n.#.#...#####....##...##.....#..\n....###..........#......##..#.#\n..#.....#....#..#...#.....##..#\n...##.##.#.######....#.#....##.\n...#.#.#...#..#....##.........#\n.#.#...##...#....#.#....##.....\n...#..#.....#.....#.##.....#...\n.#.#.#.....#.##.#....#.#....##.\n#...#......###...#..###...#....\n...##.#.#..#........##.......#.\n.####.####......#........#.....\n....#..#####....#......####....\n#...##.#..#..#####.#...#......#\n#.#....#..#.........###........\n.##.........#....#......#.#....\n...###.........####.#........##\n..#..#........#.#..##......#..#\n.##..#....#...##.####.#...#....\n......#.......#..#..#.#.##.#...\n.###....#.#...#.#.......##..#.#\n#...#....#............#####....\n...#.##......#####..#........#.\n..#...##.....#...#..#.#........\n...#.#...#...##...#..#....#....\n..#..##.....#....#.#.###.......\n.......##..#...#.............##\n.....#.....#..##.##.....#......\n.....##...#......#..##....#.###\n.#...#.#.#.#.##.....##..###..#.\n....##..........#.....###......\n....#...#.#.#..#.......#....#..\n..###...#...........##..###....\n...#.##.......#....#....#.#....\n##...#..##..#.##..........##..#\n.##.....#..#......##..####.#.##\n....##..#.#.###......#..#...#..\n####..#.#....#...#....###.#.#..\n###......#...##.##..#.##..#..#.\n..#.#..#.#.#.....#...#..#.####.\n.###.#...##...##....##......#.#\n..#............#.##..#....#..#.\n###.......#......###..#........\n....##......###.....#.#..###...\n..#...##...#......#..#.........\n#..####.#....#.....###....#.#..\n.#.#.#.......##....###.........\n.......#.##.#####....#.#...####\n.#...#....#....#.###..#.....#..\n.###.#.#.###.###.#..####.##.#..\n....#.........#.#.......##.....\n#..#..#.#...........#.#.##..#.#\n.#.....#..#...#.....#.##......#\n..###.#............#.....####..\n#.....##..##...#....####....#..\n...#.....#..................#..\n....#.###.#..#..#..##..#..##...\n...##.#........#......#...##...\n#................##....#...#...\n..##......##.#.##..#....#.....#\n.#..#.....#..........##.#.#....\n.....#...####....#..#......#...\n..#......###.#.#.#.#.......#..#\n.##......#.......#....###.#....\n#..#.#.#..#...#.#.##..##..#....\n....#...##..#.#......#.##...#..\n...###...#.##..#...#....#......\n##......#.#...#.#.#.........#..\n..#..........#...###.#.##....#.\n...##.....#.....#...###..#.....\n..####.#.....#.#.....#..#.#....\n.#.....##...##.##.#.....#.####.\n.......#.....#...##..........#.\n.#...#.#....#####....###.#..#.#\n.##.##....##...##.#.....#......\n#......#.##..#..##.#.#.......#.\n.#..#....###..#........##...#..\n..#......##.......###..##...#..\n.#..........#.#.......##.....#.\n....##.....##.#.#.##........##.\n..#.#..###..#..##...#.##...#...\n.......#.....#..#...#...#.....#\n##.#...#.#.#.##........#......#\n..###.....##..#....#.......##..\n#####..####...#.#..##.#...#..#.\n#...####....#........#....#....\n.#.#.#..#...##....#.......#.#..\n...#....##..##..#..#..#####.###\n...#......#.#..#......#...####.\n.##.....##.##.#.####.#..##...#.\n....#..#..##..##....#....#...##\n##.###........#...##....#.....#\n..#.#.#.......#....#..#....#...\n......##.....##....#...#.....#.\n#.#..#.#.......#....#.#.#......\n.....###..#...#.....#..##..#...\n......###.....#.#.#...#...##..#\n.#..#.#....##...#...#........#.\n#..###.#...####.#...#..........\n.#.##.#..#..##..#..###..##...#.\n.......#.#..........#.........#\n#......###..##..#....###.......\n..#............#.#........#...#\n..##.#.............#......#..##\n.#....#..#.#..#....###..#...#..\n....##....#..##...###....#....#\n.#....###.............#........\n#..#...#..#....#.##.#.....##...\n...........#.....#....#....#...\n.##.##.#...#....##......##..##.\n......#.#.##.#..##........#...#\n....##...##...#...#...#.#......\n.#...#....#...#......#.#...#..#\n........##.....#.#..#...##..##.\n##...#.....#.....####...#..#...\n.#.#..##.##......#...#.#...#...\n##...##.#......#....#.######.#.\n##.....####.###......#.##.#....\n.#.##....##........#...#..####.\n.......#..#....##...#.#...#..#.\n...##..........#..#........#..#\n.##.....#...#...#.##.###.......\n.##....#...#.#..#.....#...#....\n..#...#.....#.####.#.........#.\n#...#.##...#.#..#.#..#.###.#..#\n.##..#.#.##.........####....###\n.#..##........#..#.......#.....\n......#.#####.#.........#.#...#\n......#....#.#####...........#.\n..##....##..#.#..#....#......##\n#.#......#.##.#.##....#....#.#.\n..#..##.#...#.......##.........\n.....##.#...#..........#.......\n...#........#..#...#.....##.###\n....##.........#...#.#.....#...\n.......#.#....#...#.......#...#\n.#..#...##....#..#...........#.\n.#....##.##.#..#..####.#.#.....\n.##........#.....#..#......##..\n.#..##......#......#..##..#....\n###.....##.......#..##.#.......\n.....##......#.#...##...##.....\n.##....##..#..#####...#...#.##.\n##...##.#....##.#.#.#....##....\n.#.....#...#......#......##....\n##.#............#...#....#.....\n#..#.....#.....##.##.##..#..##.\n......#..............#..#...#.#\n....#.#....##......#..#...#....\n.#...#..#...#......#..##....#.#\n.....#......#..##...#.#....#...\n#...............#.##..#......#.\n.....#..##.#..#.#...###.....#..\n...#..#..#...#....#..#..##.#...\n.#...#...#..#......##...#......\n....###............#.#.#....#..\n#.#...#..#..#.#....#........#..\n....#.#.#..#..#....#..#...##.#.\n.#....#.#...#....#......#.#...#\n##..#.#.#..#.....#...###....#.#\n.##.....#.#...#..........#..#.#\n#....#......#....#.#.#...#.....\n#.#.....#.###.......#..#..#.#..\n#.....##..#.###...#...##...#.##\n.#.##....#.#.....##......###...\n.#.......##................#...\n.........#........####......#..\n...##.###..#.....#.#.....##.#..\n..#....#.#.#.##..........#.....\n#..##.....#.............##.....\n.##...#..#.......#.......#..#..\n...#.................#......##.\n....#....#.....#..###.#....###.\n..#.#..#...#..#.....###....#.#.\n.....###...#....#....#.#.##..##\n...#...#.........####........#.\n.......#..##.........#.........\n.#......##.....#.#####...##....\n....#.###...#.#....##..#......#\n.##..#....#.#....#..#.###.....#\n..#...#.#...#.##.....#.#....##.\n#.#.#.#.....##...#.#..##..#....\n.#............#.#.#..#...#...#.\n...##.#..#..####.#.###..##.....\n.##.....#.......#..##.#...##.#.\n#.#...#..#.##...##...####..#..#\n...##.......#.#.#.#.#.#...#..##\n...#.#.##..##..............###.\n.....#...#........#...#......#.\n..#..#..##....#..##.#.....#....\n#.....##........#.........##.#.\n###..#....#.##..##.............\n.#..#...#.#......#..#..##.....#\n...#.#.#............##........#\n..#.#....#..#....##....#...##.#\n...##...#...#..........##.#####\n....#..#.#.......##....#.#.###.\n##..#..#..#...###.#.....#......\n....###.#.#.#.##..##.#...#.....\n.....####..#.#..#.#......#.#.#.\n#.....#...#..#.#.........#..#..\n.##....#.#.####......##..#..##.\n......#.##.#.#..#..#....#.#....\n.#..#...#...#...#..#.....#.....\n..##.#..............#......#...\n.....###.##.......#.....#..#...\n..#.#..#..#.......#...##.##..#.\n##.###......#......#.#..#..##..\n..##.....#..#..#......#..#.....\n...##.......#.#..#.........#.#.\n......##.##.#.......#..#.#.....\n#......#........##..#.......#.#\n###....#...#...#.#...#..#..#...\n#..###....#....####..#...#.....\n....##..#.##.#....#..##...#.#..\n#.##..#....##..#...#..#.#.#..#.\n#.........#.....#...#.......#..\n...#.....#.#.....#........##...\n..#.##..#......#...#.....##.#..\n...###....#.....#...#..#.##..#."

function outside_bounds(x::Int, y::Int, bounds::Tuple{Int, Int})::Bool
    return x > bounds[2] || y > bounds[1]
end

function increment_coordinates(x::Int, x_inc::Int, y::Int, y_inc::Int)::Tuple{Int, Int}
    return (x + x_inc, y + y_inc)
end

function traverse_map(x_inc::Int, y_inc::Int)::Int
    map_pattern = hcat(split.(readlines(IOBuffer(input)), r"")...)
    _, map_pattern_size_y  = size(map_pattern)
    map = permutedims(repeat(map_pattern, ceil(Int, map_pattern_size_y / y_inc)))
    map_size = size(map)
    is_tree = map .== "#"
    hit_tree = falses(size(is_tree))
    
    x_coordinate = 1
    y_coordinate = 1

    while true
        if outside_bounds(x_coordinate, y_coordinate, map_size)
            break
        end
    
        hit_tree[y_coordinate, x_coordinate] = is_tree[y_coordinate, x_coordinate]
        x_coordinate, y_coordinate = increment_coordinates(x_coordinate, x_inc, y_coordinate, y_inc)
    end
    
    return sum(hit_tree) 
end

slopes = [1 1; 3 1; 5 1; 7 1; 1 2]

trees_hit = []

for slope in eachrow(slopes)
    push!(trees_hit, traverse_map(slope[1], slope[2]))
end

@show cumprod(trees_hit)